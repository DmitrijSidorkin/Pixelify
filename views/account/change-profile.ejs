<% layout('layouts/boilerplate')%>

<div class="main-box">
  <%-include('../partials/account-navigation')%>

  <div class="info-box">
    <form
      action="/update-profile"
      method="POST"
      class="change-profile-form validated-form"
      novalidate
      enctype="multipart/form-data"
    >
      <div class="form-section">
        <div class="form-section-label">General</div>
        <div class="profile-form-input-wrapper">
          <label for="display-name" class="form-input-label"
            >Display Name</label
          >
          <input
            type="text"
            class="profile-form-input"
            name="displayName"
            id="display-name"
            value="<%= profileData.displayName %>"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="profile-img" class="form-input-label"
            >Profile Image</label
          >
          <input
            type="file"
            class="profile-form-input"
            name="profileImg"
            id="profile-img"
            onchange="return fileValidation()"
          />
        </div>
        <div class="img-description">
          (The image has to be in allowed format (.jpg, .jpeg, .png) and cannot
          be larger than 500kb)
        </div>
      </div>
      <div class="form-section">
        <div class="form-section-label">Detailed Info</div>
        <div class="profile-form-input-wrapper">
          <label for="real-name" class="form-input-label">Name</label>
          <input
            type="text"
            class="profile-form-input"
            name="realName"
            id="real-name"
            value="<%= profileData.realName %>"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="birth-date" class="form-input-label">Birtrh Date</label>
          <input
            type="date"
            class="profile-form-input"
            name="birthDate"
            id="birth-date"
            max="<%= maxDate %>"
            value="<%=profileData.birthDate %>"
            onchange="checkDate(this)"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="country" class="form-input-label">Country</label>
          <select class="profile-form-input" id="country" name="country">
            <%countries.forEach((country) => {%>
            <option value="<%-country.value%>">
              <%-country.displayValue%>
            </option>
            <%})%>
          </select>
        </div>
        <div id="user-country-name" hidden><%-profileData.country%></div>
        <div class="profile-form-input-wrapper">
          <label for="location" class="form-input-label">Location</label>
          <input
            type="text"
            class="profile-form-input"
            name="location"
            id="location"
            placeholder="(City/State/Province/etc)"
            value="<%= profileData.location %>"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="bio" class="form-input-label">Bio</label>
          <textarea class="profile-form-input" name="bio" id="bio" rows="4">
<%=profileData.bio%></textarea
          >
        </div>
      </div>
      <div class="form-section">
        <div class="form-section-label">Media Links</div>
        <div class="profile-form-input-wrapper">
          <label for="facebook" class="form-input-label"
            ><img
              class="social-media-icon"
              src="../../icons/social-media-icons/facebook.svg"
          /></label>
          <input
            type="text"
            class="profile-form-input"
            name="facebook"
            id="facebook"
            value="<%= profileData.mediaLinks.facebook %>"
            onfocusout="checkMediaLink(this, this.value, this.name)"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="real-name" class="form-input-label"
            ><img
              class="social-media-icon"
              src="../../icons/social-media-icons/twitter.svg"
          /></label>
          <input
            type="text"
            class="profile-form-input"
            name="twitter"
            id="twitter"
            value="<%= profileData.mediaLinks.twitter %>"
            onfocusout="checkMediaLink(this, this.value, this.name)"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="real-name" class="form-input-label"
            ><img
              class="social-media-icon"
              src="../../icons/social-media-icons/instagram.svg"
          /></label>
          <input
            type="text"
            class="profile-form-input"
            name="instagram"
            id="instagram"
            value="<%= profileData.mediaLinks.instagram %>"
            onfocusout="checkMediaLink(this, this.value, this.name)"
          />
        </div>
        <div class="profile-form-input-wrapper">
          <label for="real-name" class="form-input-label"
            ><img
              class="social-media-icon"
              src="../../icons/social-media-icons/tumblr.svg"
          /></label>
          <input
            type="text"
            class="profile-form-input"
            name="tumblr"
            id="tumblr"
            value="<%= profileData.mediaLinks.tumblr %>"
            onfocusout="checkMediaLink(this, this.value, this.name)"
          />
        </div>
      </div>

      <button class="form-button">Update</button>
    </form>
  </div>
</div>

<script src="/javascripts/file-and-link-validation.js"></script>
<script src="/javascripts/autofill-profile-form.js"></script>
